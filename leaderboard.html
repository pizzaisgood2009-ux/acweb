<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Apex Times Race Leaderboard</title>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@3.3.2/dist/tailwind.min.css" rel="stylesheet">

  <style>
    body {
      background: radial-gradient(circle at center, #111 0%, #000 80%);
      color: white;
      font-family: 'Orbitron', sans-serif;
    }
    @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@500;700&display=swap');
    .glow {
      text-shadow: 0 0 10px #facc15, 0 0 20px #facc15, 0 0 30px #facc15;
    }
    .card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 12px;
      backdrop-filter: blur(10px);
    }
  </style>
</head>
<body class="min-h-screen flex flex-col items-center justify-start py-10">

  <header class="text-center mb-10">
    <h1 class="text-5xl font-bold glow mb-2">üèÅ Apex Times Race Leaderboard</h1>
    <p class="text-gray-400 tracking-widest">Live results ‚Äî updated automatically from Google Sheets</p>
  </header>

  <main class="w-full max-w-6xl px-6">
    <div id="leaderboard-table" class="card p-4 overflow-x-auto shadow-lg border-yellow-400/30 shadow-yellow-400/10">
      <p class="text-center text-gray-400">Loading leaderboard...</p>
    </div>
  </main>

  <footer class="text-center mt-10 text-gray-500 text-sm">
    Powered by <span class="text-yellow-400 font-semibold">Apex Times</span>
  </footer>

  <script>
    async function loadLeaderboard() {
      const sheetUrl = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ0L2HtZ0QC3ZlIpCwOrzGVQY0cOUDGaQj2DtBNQuqvLKwQ4sLfRmAcb5LG4H9Q3D1CFkilV5QdIwge/pub?output=csv";
      try {
        const response = await fetch(sheetUrl);
        const csvText = await response.text();
        const rows = csvText.trim().split("\n").map(r => r.split(","));

        let html = `<table class="w-full text-left border-collapse">`;
        rows.forEach((row, i) => {
          if (i === 0) {
            // Header row
            html += `<thead><tr class="bg-yellow-500/20 text-yellow-300 uppercase text-sm">`;
            row.forEach(cell => {
              html += `<th class="p-3 border-b border-yellow-400/20">${cell}</th>`;
            });
            html += `</tr></thead><tbody>`;
          } else {
            // Data rows
            html += `<tr class="hover:bg-yellow-500/10 transition-all duration-200">`;
            row.forEach((cell, j) => {
              const style = j === 0 ? "font-bold text-yellow-300" : "text-gray-200";
              html += `<td class="p-3 border-b border-gray-700 ${style}">${cell}</td>`;
            });
            html += `</tr>`;
          }
        });
        html += `</tbody></table>`;

        document.getElementById("leaderboard-table").innerHTML = html;
      } catch (error) {
        document.getElementById("leaderboard-table").innerHTML =
          "<p class='text-center text-red-500'>‚ö†Ô∏è Error loading leaderboard data.</p>";
        console.error(error);
      }
    }

    loadLeaderboard();
    // Auto-refresh every 2 minutes (120000 ms)
    setInterval(loadLeaderboard, 120000);
  </script>
</body>
</html>
